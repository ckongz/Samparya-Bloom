<!DOCTYPE html>
<html lang="en">
<head>
    <!--
        Full Name: Sophia Casey M. ONG
        Section: WD-202
        Activity: SAMPARYA BLOOM FINALS
        Date: OCTOBER 19, 2025
    -->
    <title>SamparyÃ¡ Bloom - Petals at Your Doorstep</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/styles.min.css" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <!-- Favicon declarations for different devices and platforms -->
    <link rel="shortcut icon" href="images/favicon.ico.jpg"/>
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png" />
    <link rel="icon" sizes="192X192" href="images/android-chrome-192.png" />
</head>
<body>
    <!-- Top banner for delivery information -->
    <div class="top-banner">
        We offer free delivery in Angeles City for orders Php 6,000 and up.
    </div>

    <!-- Header section with navigation -->
    <header>
        <!-- Hamburger Menu Button (Mobile Only) -->
        <button class="hamburger-menu" aria-label="Open navigation menu">
            <div class="hamburger-icon">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>

        <!-- Desktop Navigation (Hidden on Mobile â‰¤768px) -->
        <div class="desktop-nav">
            <a href="index.html">HOME</a>
            <a href="contact_location.html">CONTACT US</a>
        </div>

        <!-- Logo (Center) -->
        <div class="logo">
            <a href="index.html">
                <img src="images/Logo.png" alt="SamparyÃ¡ Bloom Logo">
            </a>
        </div>

        <!-- Desktop Header Right (Hidden on Mobile â‰¤768px) -->
        <div class="header-right">
            <!-- Dropdown navigation for quick links -->
            <div class="dropdown-nav">
                <button class="dropdown-toggle">Quick Links</button>
                <div class="dropdown-menu">
                    <a href="who_we_are.html">Who We Are</a>
                    <a href="our_story.html">Our Story</a>
                    <a href="contact_location.html">Locations</a>
                    <a href="policy.html">Privacy Policy</a>
                    <a href="feedback.html">Feedback</a>
                    <a href="terms_of_service.html">Terms of Service</a>
                </div>
            </div>
            <a href="sign_in_register.html">SIGN IN / REGISTER</a>
            
            <!-- Cart Icon for Desktop - Inside header-right -->
            <div class="cart-icon cart-desktop" onclick="window.location.href='cart.html'" role="button" aria-label="Shopping cart" tabindex="0">
                ðŸ›’
                <span class="cart-count" id="cartCount">0</span>
            </div>
        </div>

        <!-- Cart Icon for Mobile - Outside header-right -->
        <div class="cart-icon cart-mobile" onclick="window.location.href='cart.html'" role="button" aria-label="Shopping cart" tabindex="0">
            ðŸ›’
            <span class="cart-count" id="cartCountMobile">0</span>
        </div>
    </header>

    <!-- Mobile Navigation Overlay (Dark background when menu is open) -->
    <div class="mobile-nav-overlay" aria-hidden="true"></div>

    <!-- Mobile Navigation Menu (Slide-in from left) -->
    <div class="mobile-nav" aria-label="Mobile navigation">
        <div class="mobile-nav-header">
            <div class="mobile-nav-logo">
                <img src="images/Logo.png" alt="SamparyÃ¡ Bloom">
            </div>
            <button class="mobile-nav-close" aria-label="Close navigation menu">&times;</button>
        </div>
        
        <div class="mobile-nav-content">
            <!-- Main Menu Section -->
            <div class="mobile-nav-section">
                <h3>Main Menu</h3>
                <a href="index.html">Home</a>
                <a href="contact_location.html">Contact Us</a>
            </div>

            <!-- Shop Section -->
            <div class="mobile-nav-section">
                <h3>Products</h3>
                <a href="flowers.html">Flowers</a>
                <a href="ocassions.html">Occasions</a>
            </div>

            <!-- Quick Links Section -->
            <div class="mobile-nav-section">
                <h3>Quick Links</h3>
                <a href="who_we_are.html">Who We Are</a>
                <a href="our_story.html">Our Story</a>
                <a href="contact_location.html">Locations</a>
                <a href="policy.html">Privacy Policy</a>
                <a href="feedback.html">Feedback</a>
                <a href="terms_of_service.html">Terms of Service</a>
            </div>

            <!-- Sign In Button (Featured) -->
            <div class="mobile-nav-signin">
                <a href="sign_in_register.html">Sign In / Register</a>
            </div>
        </div>
    </div>

    <!-- Category Navigation -->
    <div class="category-nav">
        <a href="flowers.html">FLOWERS</a>
        <a href="ocassions.html">OCCASIONS</a>
    </div>

    <!-- Empty Cart State -->
    <div class="cart-container" id="emptyCart">
        <div class="cart-empty">
            <h1>Your cart is empty</h1>
            <a href="flowers.html" class="continue-shopping-btn">Continue Shopping</a>
        </div>
    </div>

    <!-- Cart with Items State (Initially Hidden) -->
    <div class="cart-container" id="cartWithItems" style="display: none;">
        <div class="cart-content">
            <!-- Cart Items List -->
            <div class="cart-items">
                <h2>Shopping Cart</h2>
                <div id="cartItemsList"></div>
            </div>
            
            <!-- Order Summary Section -->
            <div class="cart-summary">
                <h2>Order Summary</h2>
                <div class="summary-row"><span>Subtotal:</span><span id="subtotal">â‚±0.00</span></div>
                <div class="summary-row"><span>Shipping:</span><span id="shipping">â‚±0.00</span></div>
                <div class="summary-row"><span>Tax (12%):</span><span id="tax">â‚±0.00</span></div>
                <div class="summary-row total"><span>Total:</span><span id="total">â‚±0.00</span></div>
                <button class="checkout-btn" onclick="proceedToCheckout()">Proceed to Checkout</button>
            </div>
        </div>
    </div>

    <!-- Thank You Modal (Shown after successful checkout) -->
    <div class="thank-you-overlay" id="thankYouOverlay">
        <div class="thank-you-modal">
            <div class="thank-you-icon"></div>
            <h1>Thank You!</h1>
            <p>Your order has been successfully placed â€” thank you for choosing us! We hope you love your beautiful flowers. ðŸŒ¸</p>
            <p class="redirect-message">Redirecting you back to the homepage in <span id="countdown">3</span> seconds...</p>
        </div>
    </div>

    <!-- Footer Section -->
    <footer>
        <div class="footer-content">
            <!-- Company Links -->
            <div class="footer-links">
                <h5>SB PHILIPPINES</h5>
                <ul>
                    <li><a href="who_we_are.html">Who We Are</a></li>
                    <li><a href="our_story.html">Our Story</a></li>
                    <li><a href="contact_location.html">Locations</a></li>
                    <li><a href="policy.html">Privacy Policy</a></li>
                    <li><a href="feedback.html">Feedback</a></li>
                    <li><a href="terms_of_service.html">Terms of service</a></li>
                </ul>
            </div>

            <!-- Newsletter Signup -->
            <div class="newsletter">
                <h4>Gain Exclusive Access</h4>
                <p>Sign up today and receive exclusive discounts, early sales, style tips, and more.</p>
                <div class="newsletter-form">
                    <input type="email" placeholder="Your email">
                    <button>JOIN</button>
                </div>
                
                <!-- Social Media Links -->
                <div class="social-icons">
                    <a href="https://www.instagram.com/christructure" class="social-link instagram" target="_blank">
                        <img src="images/ig-logo.png" alt="Instagram" style="width: 24px; height: 24px; object-fit: contain;">
                    </a>
                    <a href="https://www.facebook.com/christructure" class="social-link facebook" target="_blank">
                        <img src="images/fb-logo.png" alt="Facebook" style="width: 24px; height: 24px; object-fit: contain;">
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Footer Bottom -->
        <div class="footer-bottom">
            Â©2025 SamparyÃ¡ Bloom. All rights reserved â€” Designed and created with grace by Sophia Ong
            <p class="footer-mail">
                <a href="mailto:sbphilippines.net">sbphilippines.net</a>
            </p>
        </div>
    </footer>

    <!-- Cart Rendering Script -->
    <script>
        // =============================================
        // OPTIMIZED CART RENDERING SCRIPT (NO PAGE RELOAD)
        // =============================================
        document.addEventListener("DOMContentLoaded", function() {
            // Get DOM elements
            const cartItemsList = document.getElementById("cartItemsList");
            const emptyCart = document.getElementById("emptyCart");
            const cartWithItems = document.getElementById("cartWithItems");
            const subtotalEl = document.getElementById("subtotal");
            const shippingEl = document.getElementById("shipping");
            const taxEl = document.getElementById("tax");
            const totalEl = document.getElementById("total");

            // Render cart function (no page reload needed)
            function renderCart() {
                // Get current cart from localStorage
                const cart = JSON.parse(localStorage.getItem("cart")) || [];

                // Update cart count
                updateCartCount(cart);

                // Handle empty cart state
                if (cart.length === 0) {
                    emptyCart.style.display = "block";
                    cartWithItems.style.display = "none";
                    return;
                }

                // Show cart with items
                emptyCart.style.display = "none";
                cartWithItems.style.display = "block";

                // Clear existing cart items
                cartItemsList.innerHTML = "";
                let subtotal = 0;

                // Render each cart item
                cart.forEach((item, index) => {
                    const itemTotal = item.price * (item.quantity || 1);
                    subtotal += itemTotal;

                    // Create cart item element
                    const cartItem = document.createElement("div");
                    cartItem.classList.add("cart-item");

                    // Cart item HTML structure
                    cartItem.innerHTML = `
                        <div class="item-image">
                            <img src="${item.image}" alt="${item.name}">
                        </div>
                        <div class="item-info">
                            <div class="item-header">
                                <div class="item-details">
                                    <h3>${item.name}</h3>
                                    <p>${item.description || ""}</p>
                                    <div class="item-price">â‚±${item.price.toFixed(2)}</div>
                                </div>
                                <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
                            </div>
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="updateQuantity(${index}, -1)">âˆ’</button>
                                <div class="quantity-display">${item.quantity || 1}</div>
                                <button class="quantity-btn" onclick="updateQuantity(${index}, 1)">+</button>
                            </div>
                        </div>
                    `;
                    cartItemsList.appendChild(cartItem);
                });

                // Calculate order totals
                const shipping = subtotal > 0 ? 250 : 0;
                const tax = subtotal * 0.12;
                const total = subtotal + shipping + tax;

                // Update totals in DOM with smooth transition
                subtotalEl.textContent = `â‚±${subtotal.toFixed(2)}`;
                shippingEl.textContent = `â‚±${shipping.toFixed(2)}`;
                taxEl.textContent = `â‚±${tax.toFixed(2)}`;
                totalEl.textContent = `â‚±${total.toFixed(2)}`;
            }

            // Update cart count in both desktop and mobile views
            function updateCartCount(cart) {
                try {
                    const count = cart.length;
                    
                    // Update desktop cart count
                    const cartCountEl = document.getElementById("cartCount");
                    if (cartCountEl) cartCountEl.textContent = count;
                    
                    // Update mobile cart count
                    const cartCountMobileEl = document.getElementById("cartCountMobile");
                    if (cartCountMobileEl) cartCountMobileEl.textContent = count;
                } catch (error) {
                    console.error("Error updating cart count:", error);
                }
            }

            // Quantity update function - NO PAGE RELOAD
            window.updateQuantity = (index, change) => {
                const cart = JSON.parse(localStorage.getItem("cart")) || [];
                if (!cart[index]) return;
                
                // Update quantity (minimum 1)
                cart[index].quantity = Math.max(1, (cart[index].quantity || 1) + change);
                
                // Save to localStorage
                localStorage.setItem("cart", JSON.stringify(cart));
                
                // Re-render cart WITHOUT page reload
                renderCart();
            };

            // Remove item function - NO PAGE RELOAD
            window.removeItem = (index) => {
                const cart = JSON.parse(localStorage.getItem("cart")) || [];
                
                // Add fade-out animation
                const cartItem = cartItemsList.children[index];
                if (cartItem) {
                    cartItem.style.transition = "opacity 0.3s ease, transform 0.3s ease";
                    cartItem.style.opacity = "0";
                    cartItem.style.transform = "translateX(-20px)";
                    
                    // Remove after animation
                    setTimeout(() => {
                        cart.splice(index, 1);
                        localStorage.setItem("cart", JSON.stringify(cart));
                        renderCart();
                    }, 300);
                } else {
                    // Fallback if no animation
                    cart.splice(index, 1);
                    localStorage.setItem("cart", JSON.stringify(cart));
                    renderCart();
                }
            };

            // Initial render
            renderCart();
        });

        // =============================================
        // CHECKOUT FUNCTION
        // =============================================
        function proceedToCheckout() {
            // Clear the cart
            localStorage.removeItem("cart");
            
            // Show thank you modal
            const overlay = document.getElementById("thankYouOverlay");
            overlay.style.display = "block";
            
            // Countdown timer for redirect
            let seconds = 3;
            const countdownEl = document.getElementById("countdown");
            
            const countdown = setInterval(() => {
                seconds--;
                countdownEl.textContent = seconds;
                
                // Redirect when countdown reaches 0
                if (seconds <= 0) {
                    clearInterval(countdown);
                    window.location.href = "index.html";
                }
            }, 1000);
        }
    </script>

    <!-- Fixed Scripts Section -->
    <script>
    // =============================================
    // MOBILE HAMBURGER MENU FUNCTIONALITY
    // =============================================
    document.addEventListener('DOMContentLoaded', function() {
        
        // Get all necessary elements
        const hamburgerMenu = document.querySelector('.hamburger-menu');
        const mobileNav = document.querySelector('.mobile-nav');
        const mobileNavOverlay = document.querySelector('.mobile-nav-overlay');
        const mobileNavClose = document.querySelector('.mobile-nav-close');
        const mobileNavLinks = document.querySelectorAll('.mobile-nav a');

        // Check if elements exist
        if (!hamburgerMenu || !mobileNav || !mobileNavOverlay) {
            console.warn('Mobile menu elements not found');
            return;
        }

        // ==================
        // OPEN MOBILE MENU
        // ==================
        hamburgerMenu.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            openMobileMenu();
        });

        function openMobileMenu() {
            hamburgerMenu.classList.add('active');
            mobileNav.classList.add('active');
            mobileNavOverlay.classList.add('active');
            document.body.classList.add('mobile-menu-open');
            document.body.style.overflow = 'hidden';
            
            // Focus first menu item for accessibility
            const firstLink = mobileNav.querySelector('a');
            if (firstLink) {
                setTimeout(() => firstLink.focus(), 100);
            }
        }

        // ==================
        // CLOSE MOBILE MENU
        // ==================
        function closeMobileMenu() {
            hamburgerMenu.classList.remove('active');
            mobileNav.classList.remove('active');
            mobileNavOverlay.classList.remove('active');
            document.body.classList.remove('mobile-menu-open');
            document.body.style.overflow = '';
            
            // Return focus to hamburger button
            hamburgerMenu.focus();
        }

        // Close button click
        if (mobileNavClose) {
            mobileNavClose.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                closeMobileMenu();
            });
        }

        // Overlay click
        mobileNavOverlay.addEventListener('click', function(e) {
            e.preventDefault();
            closeMobileMenu();
        });

        // ==================
        // CLOSE ON LINK CLICK
        // ==================
        mobileNavLinks.forEach(function(link) {
            link.addEventListener('click', function() {
                // Small delay for better UX
                setTimeout(function() {
                    closeMobileMenu();
                }, 300);
            });
        });

        // ==================
        // KEYBOARD SUPPORT
        // ==================
        
        // ESC key to close menu
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && mobileNav.classList.contains('active')) {
                closeMobileMenu();
            }
        });

        // ==================
        // WINDOW RESIZE HANDLER
        // ==================
        let resizeTimer;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function() {
                // If screen is resized to desktop size, close mobile menu
                if (window.innerWidth > 768 && mobileNav.classList.contains('active')) {
                    closeMobileMenu();
                }
            }, 250);
        });

        // ==================
        // DROPDOWN NAVIGATION FUNCTIONALITY
        // ==================
        const dropdown = document.querySelector('.dropdown-nav');
        const dropdownToggle = document.querySelector('.dropdown-toggle');
        
        if (dropdownToggle && dropdown) {
            // Toggle dropdown on click
            dropdownToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                dropdown.classList.toggle('active');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!dropdown.contains(e.target)) {
                    dropdown.classList.remove('active');
                }
            });
        }

        // ==================
        // CART ICON KEYBOARD SUPPORT
        // ==================
        const cartIcons = document.querySelectorAll('.cart-icon');
        cartIcons.forEach(function(cartIcon) {
            if (cartIcon) {
                cartIcon.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        window.location.href = 'cart.html';
                    }
                });
            }
        });

    }); // Closes the main DOMContentLoaded event listener

    // Cart Manager Object
    const cartManager = {
        // Retrieve cart from localStorage or initialize empty array
        cart: JSON.parse(localStorage.getItem("cart")) || [],

        // Save cart to localStorage and update count display
        saveCart() {
            localStorage.setItem("cart", JSON.stringify(this.cart));
            this.updateCartCount();
        },

        // Update cart count in both desktop and mobile views
        updateCartCount() {
            try {
                const count = this.cart.length;
                
                // Update desktop cart count
                const cartCountEl = document.getElementById("cartCount");
                if (cartCountEl) cartCountEl.textContent = count;
                
                // Update mobile cart count
                const cartCountMobileEl = document.getElementById("cartCountMobile");
                if (cartCountMobileEl) cartCountMobileEl.textContent = count;
            } catch (error) {
                console.error("Error updating cart count:", error);
            }
        }
    };

    // Initialize count on page load
    document.addEventListener("DOMContentLoaded", () => {
        cartManager.updateCartCount();
    });

    // -------------------------
    // PAGE SWITCHING FUNCTIONALITY
    // -------------------------
    function showPage(pageId) {
        try {
            const pages = document.querySelectorAll(".bloomify-page");
            pages.forEach(page => page.classList.remove("active"));
            
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add("active");
                window.scrollTo(0, 0);
            }
        } catch (error) {
            console.error("Error switching page:", error);
        }
    }
    </script>
</body>
</html>
